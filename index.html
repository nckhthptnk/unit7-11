<!doctype html>
<html lang="vi">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Unit 7: Healthy Lifestyle</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        html {
            height: 100%;
        }
        
        .flashcard {
            perspective: 1000px;
            cursor: pointer;
        }
        
        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }
        
        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .flashcard-back {
            transform: rotateY(180deg);
        }
        
        .highlight {
            background-color: #fef08a;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .progress-ring-circle {
            transition: stroke-dashoffset 0.5s ease;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="min-h-full">
  <div id="app" class="min-h-full flex flex-col"></div>
  <script>
        const defaultConfig = {
            unit_title: "Unit 7: Healthy Lifestyle",
            home_button_text: "üè† Trang ch·ªß",
            background_color: "#f0f9ff",
            surface_color: "#ffffff",
            text_color: "#1e293b",
            primary_action_color: "#3b82f6",
            secondary_action_color: "#64748b",
            font_family: "Segoe UI",
            font_size: 16
        };
        
        let appState = {
            currentSection: 'vocabulary',
            currentVocabIndex: 0,
            isFlipped: false,
            currentGrammarTopic: null,
            readingAnswers: {},
            grammarAnswers: {},
            completedVocabCards: new Set(),
            progressData: null,
            vocabQuizAnswers: {},
            currentQuizIndex: 0,
            vocabSubSection: 'flashcards' // 'flashcards' or 'quiz'
        };
        
        const vocabularyData = [
            {
                word: "pace",
                ipa: "/pe…™s/",
                type: "noun, verb",
                meaning: "t·ªëc ƒë·ªô, nh·ªãp ƒë·ªô",
                example: "Students can learn at their own pace in online courses."
            },
            {
                word: "course",
                ipa: "/k…îÀêrs/",
                type: "noun",
                meaning: "kh√≥a h·ªçc",
                example: "I enrolled in a programming course to improve my skills."
            },
            {
                word: "description",
                ipa: "/d…™Ààskr…™p Én/",
                type: "noun",
                meaning: "m√¥ t·∫£, s·ª± mi√™u t·∫£",
                example: "The course description explains what students will learn."
            },
            {
                word: "own",
                ipa: "/o än/",
                type: "adjective, verb",
                meaning: "s·ªü h·ªØu, c·ªßa ri√™ng",
                example: "Each student has their own learning style."
            },
            {
                word: "pocket",
                ipa: "/Ààp…ëÀêk…™t/",
                type: "noun",
                meaning: "t√∫i, b·ªè t√∫i",
                example: "Mobile learning puts education right in your pocket."
            },
            {
                word: "long-life",
                ipa: "/l…îÀê≈ã la…™f/",
                type: "adjective",
                meaning: "l√¢u d√†i, b·ªÅn l√¢u",
                example: "Long-life learning is essential in today's world."
            },
            {
                word: "website",
                ipa: "/Ààwebsa…™t/",
                type: "noun",
                meaning: "trang web",
                example: "The educational website offers free courses to everyone."
            },
            {
                word: "whatever",
                ipa: "/w…ôtÀàev…ôr/",
                type: "pronoun",
                meaning: "b·∫•t c·ª© g√¨, d√π g√¨",
                example: "You can study whatever subject interests you most."
            },
            {
                word: "software",
                ipa: "/Ààs…îÀêftwer/",
                type: "noun",
                meaning: "ph·∫ßn m·ªÅm",
                example: "Educational software makes learning more interactive."
            },
            {
                word: "platform",
                ipa: "/Ààpl√¶tf…îÀêrm/",
                type: "noun",
                meaning: "n·ªÅn t·∫£ng",
                example: "This learning platform supports millions of students."
            },
            {
                word: "lecture",
                ipa: "/Ààlekt É…ôr/",
                type: "noun, verb",
                meaning: "b√†i gi·∫£ng, gi·∫£ng b√†i",
                example: "The professor's lecture was very informative."
            },
            {
                word: "interact",
                ipa: "/Àå…™nt…ôrÀà√¶kt/",
                type: "verb",
                meaning: "t∆∞∆°ng t√°c",
                example: "Students can interact with teachers through video calls."
            },
            {
                word: "delete",
                ipa: "/d…™ÀàliÀêt/",
                type: "verb",
                meaning: "x√≥a",
                example: "You can delete old files to free up storage space."
            },
            {
                word: "chunk",
                ipa: "/t É å≈ãk/",
                type: "noun",
                meaning: "kh·ªëi, ph·∫ßn",
                example: "Break down complex topics into smaller chunks."
            },
            {
                word: "instructor",
                ipa: "/…™nÀàstr åkt…ôr/",
                type: "noun",
                meaning: "gi·∫£ng vi√™n, ng∆∞·ªùi h∆∞·ªõng d·∫´n",
                example: "The instructor provides feedback on student assignments."
            },
            {
                word: "sadly",
                ipa: "/Ààs√¶dli/",
                type: "adverb",
                meaning: "ƒë√°ng bu·ªìn, ti·∫øc l√†",
                example: "Sadly, not everyone has access to quality education."
            },
            {
                word: "hire",
                ipa: "/ha…™…ôr/",
                type: "verb",
                meaning: "thu√™, tuy·ªÉn d·ª•ng",
                example: "Companies hire graduates with strong technical skills."
            },
            {
                word: "technology",
                ipa: "/tekÀàn…ëÀêl…ôd íi/",
                type: "noun",
                meaning: "c√¥ng ngh·ªá",
                example: "Technology has revolutionized modern education."
            },
            {
                word: "concentrate",
                ipa: "/Ààk…ëÀênsntre…™t/",
                type: "verb",
                meaning: "t·∫≠p trung",
                example: "Students need to concentrate during online classes."
            },
            {
                word: "prepare",
                ipa: "/pr…™Ààper/",
                type: "verb",
                meaning: "chu·∫©n b·ªã",
                example: "Teachers prepare lessons using digital tools."
            },
            {
                word: "give",
                ipa: "/…°…™v/",
                type: "verb",
                meaning: "ƒë∆∞a, cho",
                example: "Online platforms give students access to global education."
            },
            {
                word: "carry",
                ipa: "/Ààk√¶ri/",
                type: "verb",
                meaning: "mang, th·ª±c hi·ªán",
                example: "Students can carry their entire library on a tablet."
            },
            {
                word: "presentation",
                ipa: "/ÀåpriÀêznÀàte…™ Én/",
                type: "noun",
                meaning: "b√†i thuy·∫øt tr√¨nh",
                example: "Students gave excellent presentations using digital tools."
            },
            {
                word: "language",
                ipa: "/Ààl√¶≈ã…°w…™d í/",
                type: "noun",
                meaning: "ng√¥n ng·ªØ",
                example: "Learning a new language opens many opportunities."
            },
            {
                word: "create",
                ipa: "/kriÀàe…™t/",
                type: "verb",
                meaning: "t·∫°o ra, s√°ng t·∫°o",
                example: "Teachers create engaging content for their students."
            },
            {
                word: "icon",
                ipa: "/Ààa…™k…ëÀên/",
                type: "noun",
                meaning: "bi·ªÉu t∆∞·ª£ng",
                example: "Click on the icon to open the learning app."
            },
            {
                word: "confirmation",
                ipa: "/Àåk…ëÀênf…ôrÀàme…™ Én/",
                type: "noun",
                meaning: "x√°c nh·∫≠n",
                example: "You'll receive a confirmation email after enrollment."
            },
            {
                word: "digital",
                ipa: "/Ààd…™d í…™tl/",
                type: "adjective",
                meaning: "k·ªπ thu·∫≠t s·ªë",
                example: "Digital learning has become increasingly popular."
            },
            {
                word: "update",
                ipa: "/ åpÀàde…™t/",
                type: "verb, noun",
                meaning: "c·∫≠p nh·∫≠t",
                example: "The app sends updates about new course materials."
            },
            {
                word: "without",
                ipa: "/w…™Àà√∞a ät/",
                type: "preposition",
                meaning: "kh√¥ng c√≥, thi·∫øu",
                example: "Students can learn without leaving their homes."
            },
            {
                word: "imagine",
                ipa: "/…™Ààm√¶d í…™n/",
                type: "verb",
                meaning: "t∆∞·ªüng t∆∞·ª£ng",
                example: "Imagine learning from the world's best teachers online."
            },
            {
                word: "advertise",
                ipa: "/Àà√¶dv…ôrta…™z/",
                type: "verb",
                meaning: "qu·∫£ng c√°o",
                example: "Universities advertise their online programs globally."
            },
            {
                word: "normal",
                ipa: "/Ààn…îÀêrml/",
                type: "adjective",
                meaning: "b√¨nh th∆∞·ªùng",
                example: "Online learning has become the new normal."
            },
            {
                word: "information",
                ipa: "/Àå…™nf…ôrÀàme…™ Én/",
                type: "noun",
                meaning: "th√¥ng tin",
                example: "Students can access vast amounts of information online."
            },
            {
                word: "e-book",
                ipa: "/ÀàiÀê b äk/",
                type: "noun",
                meaning: "s√°ch ƒëi·ªán t·ª≠",
                example: "E-books are more convenient than traditional textbooks."
            },
            {
                word: "exist",
                ipa: "/…™…°Ààz…™st/",
                type: "verb",
                meaning: "t·ªìn t·∫°i",
                example: "Many free educational resources exist online."
            },
            {
                word: "permission",
                ipa: "/p…ôrÀàm…™ Én/",
                type: "noun",
                meaning: "s·ª± cho ph√©p",
                example: "Students need permission to access certain course materials."
            },
            {
                word: "capture",
                ipa: "/Ààk√¶pt É…ôr/",
                type: "verb",
                meaning: "ghi l·∫°i, thu ƒë∆∞·ª£c",
                example: "Screen recording can capture important lecture moments."
            },
            {
                word: "article",
                ipa: "/Àà…ëÀêrt…™kl/",
                type: "noun",
                meaning: "b√†i b√°o, b√†i vi·∫øt",
                example: "Students read articles to supplement their learning."
            },
            {
                word: "app",
                ipa: "/√¶p/",
                type: "noun",
                meaning: "·ª©ng d·ª•ng",
                example: "The learning app works on both phones and tablets."
            },
            {
                word: "bite-sized",
                ipa: "/ba…™t sa…™zd/",
                type: "adjective",
                meaning: "nh·ªè g·ªçn, d·ªÖ ti√™u h√≥a",
                example: "Bite-sized lessons are perfect for busy students."
            },
            {
                word: "lazy",
                ipa: "/Ààle…™zi/",
                type: "adjective",
                meaning: "l∆∞·ªùi bi·∫øng",
                example: "Don't be lazy - complete your assignments on time."
            },
            {
                word: "assignment",
                ipa: "/…ôÀàsa…™nm…ônt/",
                type: "noun",
                meaning: "b√†i t·∫≠p, nhi·ªám v·ª•",
                example: "The assignment is due next Friday."
            },
            {
                word: "material",
                ipa: "/m…ôÀàt…™ri…ôl/",
                type: "noun",
                meaning: "t√†i li·ªáu, v·∫≠t li·ªáu",
                example: "All course materials are available online."
            },
            {
                word: "real",
                ipa: "/riÀêl/",
                type: "adjective",
                meaning: "th·ª±c, th·∫≠t",
                example: "Online courses provide real-world skills."
            },
            {
                word: "developer",
                ipa: "/d…™Ààvel…ôp…ôr/",
                type: "noun",
                meaning: "nh√† ph√°t tri·ªÉn",
                example: "App developers create educational software."
            },
            {
                word: "teaching",
                ipa: "/ÀàtiÀêt É…™≈ã/",
                type: "noun",
                meaning: "vi·ªác d·∫°y h·ªçc",
                example: "Online teaching requires different skills than classroom teaching."
            },
            {
                word: "perfectly",
                ipa: "/Ààp…úÀêrf…™ktli/",
                type: "adverb",
                meaning: "ho√†n h·∫£o, ho√†n to√†n",
                example: "The video quality works perfectly for online lectures."
            },
            {
                word: "professional",
                ipa: "/pr…ôÀàfe É…ônl/",
                type: "adjective, noun",
                meaning: "chuy√™n nghi·ªáp",
                example: "Professional development courses help advance careers."
            },
            {
                word: "way",
                ipa: "/we…™/",
                type: "noun",
                meaning: "c√°ch, ph∆∞∆°ng ph√°p",
                example: "Online learning is an effective way to gain new skills."
            }
        ];
        
        const vocabularyQuiz = [
            {
                question: "What does 'pace' mean?",
                options: ["t·ªëc ƒë·ªô, nh·ªãp ƒë·ªô", "kh√¥ng gian", "th·ªùi gian", "kho·∫£ng c√°ch"],
                correct: 0
            },
            {
                question: "Choose the correct meaning of 'course':",
                options: ["ƒë∆∞·ªùng ƒëi", "kh√≥a h·ªçc", "ngu·ªìn g·ªëc", "nguy√™n nh√¢n"],
                correct: 1
            },
            {
                question: "'Description' means:",
                options: ["quy·∫øt ƒë·ªãnh", "m√¥ t·∫£, s·ª± mi√™u t·∫£", "th·∫£o lu·∫≠n", "tranh lu·∫≠n"],
                correct: 1
            },
            {
                question: "What is the meaning of 'platform'?",
                options: ["m√°y bay", "n·ªÅn t·∫£ng", "h√†nh tinh", "k·∫ø ho·∫°ch"],
                correct: 1
            },
            {
                question: "'Software' refers to:",
                options: ["ph·∫ßn c·ª©ng", "ph·∫ßn m·ªÅm", "ƒë·ªì n·ªôi th·∫•t", "qu·∫ßn √°o"],
                correct: 1
            },
            {
                question: "The word 'interact' means:",
                options: ["giao ti·∫øp", "t∆∞∆°ng t√°c", "can thi·ªáp", "l√†m phi·ªÅn"],
                correct: 1
            },
            {
                question: "'Technology' means:",
                options: ["sinh h·ªçc", "c√¥ng ngh·ªá", "ƒë·ªãa l√Ω", "l·ªãch s·ª≠"],
                correct: 1
            },
            {
                question: "What does 'digital' mean?",
                options: ["t∆∞∆°ng t·ª±", "k·ªπ thu·∫≠t s·ªë", "th·ªß c√¥ng", "c∆° kh√≠"],
                correct: 1
            },
            {
                question: "'Application' or 'app' refers to:",
                options: ["ƒë∆°n xin vi·ªác", "·ª©ng d·ª•ng", "√°p d·ª•ng", "ch·∫•p thu·∫≠n"],
                correct: 1
            },
            {
                question: "The meaning of 'assignment' is:",
                options: ["ph√¢n c√¥ng", "b√†i t·∫≠p, nhi·ªám v·ª•", "h·∫πn g·∫∑p", "th·ªèa thu·∫≠n"],
                correct: 1
            },
            {
                question: "'Material' means:",
                options: ["m·∫π", "v·∫≠t ch·∫•t", "t√†i li·ªáu, v·∫≠t li·ªáu", "quan tr·ªçng"],
                correct: 2
            },
            {
                question: "What does 'professional' mean?",
                options: ["gi√°o s∆∞", "chuy√™n nghi·ªáp", "ngh·ªÅ nghi·ªáp", "chuy√™n gia"],
                correct: 1
            },
            {
                question: "'Developer' refers to:",
                options: ["nh√† ph√°t tri·ªÉn", "nh√† ph√°t minh", "nh√† thi·∫øt k·∫ø", "nh√† s·∫£n xu·∫•t"],
                correct: 0
            },
            {
                question: "The word 'create' means:",
                options: ["s√°ng t·∫°o", "t·∫°o ra, s√°ng t·∫°o", "ph√° h·ªßy", "thay ƒë·ªïi"],
                correct: 1
            },
            {
                question: "'Information' means:",
                options: ["tin t·ª©c", "th√¥ng tin", "th√¥ng b√°o", "b√°o c√°o"],
                correct: 1
            },
            {
                question: "What does 'update' mean?",
                options: ["l·ªói th·ªùi", "c·∫≠p nh·∫≠t", "h·ªßy b·ªè", "x√≥a"],
                correct: 1
            },
            {
                question: "'Permission' refers to:",
                options: ["c·∫•m ƒëo√°n", "s·ª± cho ph√©p", "quy·ªÅn l·ª±c", "tr√°ch nhi·ªám"],
                correct: 1
            },
            {
                question: "The meaning of 'capture' is:",
                options: ["th·∫£ ra", "ghi l·∫°i, thu ƒë∆∞·ª£c", "tho√°t kh·ªèi", "·∫©n gi·∫•u"],
                correct: 1
            },
            {
                question: "'Article' means:",
                options: ["ngh·ªá thu·∫≠t", "b√†i b√°o, b√†i vi·∫øt", "v·∫≠t ph·∫©m", "ƒëi·ªÅu kho·∫£n"],
                correct: 1
            },
            {
                question: "What does 'normal' mean?",
                options: ["b·∫•t th∆∞·ªùng", "b√¨nh th∆∞·ªùng", "ƒë·∫∑c bi·ªát", "kh√°c th∆∞·ªùng"],
                correct: 1
            },
            {
                question: "'Imagine' means:",
                options: ["nh·ªõ l·∫°i", "t∆∞·ªüng t∆∞·ª£ng", "qu√™n ƒëi", "hi·ªÉu ƒë∆∞·ª£c"],
                correct: 1
            },
            {
                question: "The word 'exist' means:",
                options: ["bi·∫øn m·∫•t", "t·ªìn t·∫°i", "xu·∫•t hi·ªán", "ph√°t tri·ªÉn"],
                correct: 1
            },
            {
                question: "'Language' refers to:",
                options: ["ng√¥n ng·ªØ", "vƒÉn h·ªçc", "t·ª´ v·ª±ng", "ng·ªØ ph√°p"],
                correct: 0
            },
            {
                question: "What does 'presentation' mean?",
                options: ["hi·ªán t·∫°i", "b√†i thuy·∫øt tr√¨nh", "qu√† t·∫∑ng", "ƒë·∫°i di·ªán"],
                correct: 1
            },
            {
                question: "'Instructor' means:",
                options: ["h·ªçc sinh", "gi·∫£ng vi√™n, ng∆∞·ªùi h∆∞·ªõng d·∫´n", "gi√°m ƒë·ªëc", "th∆∞ k√Ω"],
                correct: 1
            },
            {
                question: "The meaning of 'lecture' is:",
                options: ["ƒë·ªçc s√°ch", "b√†i gi·∫£ng, gi·∫£ng b√†i", "vi·∫øt b√†i", "nghe nh·∫°c"],
                correct: 1
            },
            {
                question: "'Website' refers to:",
                options: ["trang web", "m·∫°ng internet", "m√°y t√≠nh", "ƒëi·ªán tho·∫°i"],
                correct: 0
            },
            {
                question: "What does 'concentrate' mean?",
                options: ["ph√¢n t√°n", "t·∫≠p trung", "th∆∞ gi√£n", "ngh·ªâ ng∆°i"],
                correct: 1
            },
            {
                question: "'Prepare' means:",
                options: ["ho√†n th√†nh", "chu·∫©n b·ªã", "b·∫Øt ƒë·∫ßu", "k·∫øt th√∫c"],
                correct: 1
            },
            {
                question: "The word 'carry' means:",
                options: ["ƒë·ªÉ l·∫°i", "mang, th·ª±c hi·ªán", "n√©m ƒëi", "gi·∫•u ƒëi"],
                correct: 1
            },
            {
                question: "'Teaching' refers to:",
                options: ["h·ªçc t·∫≠p", "vi·ªác d·∫°y h·ªçc", "nghi√™n c·ª©u", "th√≠ nghi·ªám"],
                correct: 1
            },
            {
                question: "What does 'perfectly' mean?",
                options: ["kh√¥ng ho√†n h·∫£o", "ho√†n h·∫£o, ho√†n to√†n", "g·∫ßn nh∆∞", "c√≥ th·ªÉ"],
                correct: 1
            },
            {
                question: "'Way' means:",
                options: ["l√Ω do", "c√°ch, ph∆∞∆°ng ph√°p", "k·∫øt qu·∫£", "nguy√™n nh√¢n"],
                correct: 1
            },
            {
                question: "The meaning of 'real' is:",
                options: ["gi·∫£", "th·ª±c, th·∫≠t", "·∫£o", "t∆∞·ªüng t∆∞·ª£ng"],
                correct: 1
            },
            {
                question: "'Bite-sized' means:",
                options: ["to l·ªõn", "nh·ªè g·ªçn, d·ªÖ ti√™u h√≥a", "trung b√¨nh", "kh·ªïng l·ªì"],
                correct: 1
            },
            {
                question: "What does 'lazy' mean?",
                options: ["chƒÉm ch·ªâ", "l∆∞·ªùi bi·∫øng", "nhanh nh·∫πn", "t√≠ch c·ª±c"],
                correct: 1
            },
            {
                question: "'Confirmation' refers to:",
                options: ["t·ª´ ch·ªëi", "x√°c nh·∫≠n", "nghi ng·ªù", "ph·ªß nh·∫≠n"],
                correct: 1
            },
            {
                question: "The word 'icon' means:",
                options: ["√¢m thanh", "bi·ªÉu t∆∞·ª£ng", "m√†u s·∫Øc", "h√¨nh d·∫°ng"],
                correct: 1
            },
            {
                question: "'Advertise' means:",
                options: ["che gi·∫•u", "qu·∫£ng c√°o", "c·∫•m ƒëo√°n", "ph√™ b√¨nh"],
                correct: 1
            },
            {
                question: "What does 'without' mean?",
                options: ["c√πng v·ªõi", "kh√¥ng c√≥, thi·∫øu", "b√™n trong", "xung quanh"],
                correct: 1
            },
            {
                question: "'Delete' means:",
                options: ["th√™m v√†o", "x√≥a", "sao ch√©p", "di chuy·ªÉn"],
                correct: 1
            },
            {
                question: "The meaning of 'chunk' is:",
                options: ["to√†n b·ªô", "kh·ªëi, ph·∫ßn", "chi ti·∫øt", "t·ªïng th·ªÉ"],
                correct: 1
            },
            {
                question: "'Sadly' means:",
                options: ["vui v·∫ª", "ƒë√°ng bu·ªìn, ti·∫øc l√†", "h·∫°nh ph√∫c", "ph·∫•n kh√≠ch"],
                correct: 1
            },
            {
                question: "What does 'hire' mean?",
                options: ["sa th·∫£i", "thu√™, tuy·ªÉn d·ª•ng", "ngh·ªâ vi·ªác", "thƒÉng ch·ª©c"],
                correct: 1
            },
            {
                question: "'Give' means:",
                options: ["nh·∫≠n", "ƒë∆∞a, cho", "gi·ªØ l·∫°i", "m∆∞·ª£n"],
                correct: 1
            },
            {
                question: "The word 'own' means:",
                options: ["m∆∞·ª£n", "s·ªü h·ªØu, c·ªßa ri√™ng", "cho thu√™", "chia s·∫ª"],
                correct: 1
            },
            {
                question: "'Pocket' refers to:",
                options: ["t√∫i, b·ªè t√∫i", "v√≠ ti·ªÅn", "c·∫∑p s√°ch", "h·ªôp ƒë·ª±ng"],
                correct: 0
            },
            {
                question: "What does 'long-life' mean?",
                options: ["ng·∫Øn h·∫°n", "l√¢u d√†i, b·ªÅn l√¢u", "t·∫°m th·ªùi", "nhanh ch√≥ng"],
                correct: 1
            },
            {
                question: "'Whatever' means:",
                options: ["m·ªôt c√°i g√¨ ƒë√≥", "b·∫•t c·ª© g√¨, d√π g√¨", "kh√¥ng c√≥ g√¨", "m·ªçi th·ª©"],
                correct: 1
            },
            {
                question: "The meaning of 'e-book' is:",
                options: ["s√°ch gi·∫•y", "s√°ch ƒëi·ªán t·ª≠", "t·∫°p ch√≠", "b√°o"],
                correct: 1
            }
        ];
        
        const readingText = `Modern <span class="highlight">technology</span> has revolutionized education through online learning <span class="highlight">platforms</span>. Students can now access <span class="highlight">courses</span> from top universities <span class="highlight">without</span> leaving their homes. These <span class="highlight">digital</span> learning environments allow learners to study at their own <span class="highlight">pace</span>, making education more flexible than ever before.

Educational <span class="highlight">apps</span> and <span class="highlight">software</span> provide interactive lessons that help students <span class="highlight">concentrate</span> better. <span class="highlight">Instructors</span> can <span class="highlight">create</span> engaging content using multimedia tools, while students can <span class="highlight">interact</span> with materials through videos, quizzes, and simulations. Many platforms offer <span class="highlight">bite-sized</span> lessons that fit perfectly into busy schedules.

Online education also provides access to vast amounts of <span class="highlight">information</span> and <span class="highlight">materials</span>. Students can read <span class="highlight">e-books</span>, watch <span class="highlight">lectures</span>, and complete <span class="highlight">assignments</span> using various <span class="highlight">devices</span>. <span class="highlight">Professional</span> <span class="highlight">developers</span> continuously <span class="highlight">update</span> these learning systems to improve user experience. This <span class="highlight">way</span> of learning has become the new <span class="highlight">normal</span>, especially after recent global changes. Students can <span class="highlight">prepare</span> for their future careers by gaining <span class="highlight">real</span> skills through online <span class="highlight">teaching</span> methods. The flexibility to learn <span class="highlight">whatever</span> subject interests them most makes online education incredibly valuable for <span class="highlight">long-life</span> learning goals.`;
        
        const readingQuestions = [
            {
                question: "What has revolutionized education according to the text?",
                options: [
                    "Traditional classrooms",
                    "Modern technology and online learning platforms",
                    "Printed textbooks",
                    "Face-to-face lectures only"
                ],
                correct: 1
            },
            {
                question: "What advantage do digital learning environments offer students?",
                options: [
                    "Fixed study schedules",
                    "Limited course options", 
                    "Study at their own pace",
                    "Only weekend classes"
                ],
                correct: 2
            },
            {
                question: "What type of lessons do many platforms offer for busy schedules?",
                options: [
                    "Long lectures",
                    "Bite-sized lessons",
                    "Full-day courses",
                    "Weekend workshops"
                ],
                correct: 1
            },
            {
                question: "Who continuously updates learning systems?",
                options: [
                    "Students",
                    "Parents",
                    "Professional developers",
                    "Government officials"
                ],
                correct: 2
            },
            {
                question: "What makes online education valuable for long-life learning?",
                options: [
                    "High costs",
                    "Limited subjects",
                    "Flexibility to learn whatever subject interests them most",
                    "Strict time requirements"
                ],
                correct: 2
            }
        ];
        
        const grammarTopics = {
            participial: {
                title: "Participial Phrases",
                theory: `<strong>Participial Phrases</strong> l√† c·ª•m t·ª´ b·∫Øt ƒë·∫ßu b·∫±ng ph√¢n t·ª´ (V-ing ho·∫∑c V-ed/V3) d√πng ƒë·ªÉ r√∫t g·ªçn m·ªánh ƒë·ªÅ quan h·ªá ho·∫∑c m·ªánh ƒë·ªÅ tr·∫°ng ng·ªØ.

<strong>C·∫•u tr√∫c:</strong>
‚Ä¢ Present Participle (V-ing): di·ªÖn t·∫£ h√†nh ƒë·ªông ch·ªß ƒë·ªông
‚Ä¢ Past Participle (V-ed/V3): di·ªÖn t·∫£ h√†nh ƒë·ªông b·ªã ƒë·ªông

<strong>V√≠ d·ª•:</strong>
‚Ä¢ Walking in the park, I saw many people exercising. (Khi ƒëang ƒëi b·ªô trong c√¥ng vi√™n, t√¥i th·∫•y nhi·ªÅu ng∆∞·ªùi t·∫≠p th·ªÉ d·ª•c)
‚Ä¢ Exhausted from the workout, she decided to rest. (Ki·ªát s·ª©c sau bu·ªïi t·∫≠p, c√¥ ·∫•y quy·∫øt ƒë·ªãnh ngh·ªâ ng∆°i)

<strong>C√°ch d√πng:</strong>
1. R√∫t g·ªçn m·ªánh ƒë·ªÅ quan h·ªá: The girl who is running ‚Üí The girl running
2. R√∫t g·ªçn m·ªánh ƒë·ªÅ tr·∫°ng ng·ªØ ch·ªâ th·ªùi gian, nguy√™n nh√¢n: Because she felt tired ‚Üí Feeling tired`
            },
            infinitive: {
                title: "To-infinitive Clauses",
                theory: `<strong>To-infinitive Clauses</strong> l√† m·ªánh ƒë·ªÅ b·∫Øt ƒë·∫ßu b·∫±ng "to + V" d√πng ƒë·ªÉ di·ªÖn t·∫£ m·ª•c ƒë√≠ch, k·∫øt qu·∫£ ho·∫∑c b·ªï nghƒ©a cho danh t·ª´/t√≠nh t·ª´.

<strong>C·∫•u tr√∫c:</strong>
‚Ä¢ To + V (infinitive)
‚Ä¢ To + be + V-ed/V3 (passive infinitive)

<strong>V√≠ d·ª•:</strong>
‚Ä¢ She exercises daily to stay healthy. (C√¥ ·∫•y t·∫≠p th·ªÉ d·ª•c h√†ng ng√†y ƒë·ªÉ gi·ªØ s·ª©c kh·ªèe)
‚Ä¢ To maintain good health, you need a balanced diet. (ƒê·ªÉ duy tr√¨ s·ª©c kh·ªèe t·ªët, b·∫°n c·∫ßn ch·∫ø ƒë·ªô ƒÉn c√¢n b·∫±ng)

<strong>C√°ch d√πng:</strong>
1. Di·ªÖn t·∫£ m·ª•c ƒë√≠ch: I eat vegetables to get vitamins
2. B·ªï nghƒ©a cho t√≠nh t·ª´: It's important to exercise regularly
3. B·ªï nghƒ©a cho danh t·ª´: The best way to lose weight is exercising`
            },
            perfectGerund: {
                title: "Perfect Gerunds",
                theory: `<strong>Perfect Gerunds</strong> l√† d·∫°ng danh ƒë·ªông t·ª´ ho√†n th√†nh (having + V-ed/V3) d√πng ƒë·ªÉ di·ªÖn t·∫£ h√†nh ƒë·ªông ƒë√£ ho√†n th√†nh tr∆∞·ªõc m·ªôt h√†nh ƒë·ªông kh√°c trong qu√° kh·ª©.

<strong>C·∫•u tr√∫c:</strong>
‚Ä¢ Having + V-ed/V3 (active)
‚Ä¢ Having been + V-ed/V3 (passive)

<strong>V√≠ d·ª•:</strong>
‚Ä¢ She regrets not having exercised regularly when she was young. (C√¥ ·∫•y h·ªëi h·∫≠n v√¨ ƒë√£ kh√¥ng t·∫≠p th·ªÉ d·ª•c ƒë·ªÅu ƒë·∫∑n khi c√≤n tr·∫ª)
‚Ä¢ Having eaten a healthy breakfast, he felt energized. (Sau khi ƒë√£ ƒÉn b·ªØa s√°ng l√†nh m·∫°nh, anh ·∫•y c·∫£m th·∫•y tr√†n ƒë·∫ßy nƒÉng l∆∞·ª£ng)

<strong>C√°ch d√πng:</strong>
1. Sau ƒë·ªông t·ª´: regret, deny, admit + having V-ed/V3
2. Di·ªÖn t·∫£ h√†nh ƒë·ªông x·∫£y ra tr∆∞·ªõc: Having finished the workout, she took a shower`
            },
            perfectParticiple: {
                title: "Perfect Participle Clauses",
                theory: `<strong>Perfect Participle Clauses</strong> l√† m·ªánh ƒë·ªÅ ph√¢n t·ª´ ho√†n th√†nh (having + V-ed/V3) d√πng ƒë·ªÉ r√∫t g·ªçn m·ªánh ƒë·ªÅ tr·∫°ng ng·ªØ ch·ªâ th·ªùi gian ho·∫∑c nguy√™n nh√¢n khi h√†nh ƒë·ªông n√†y x·∫£y ra tr∆∞·ªõc h√†nh ƒë·ªông kh√°c.

<strong>C·∫•u tr√∫c:</strong>
‚Ä¢ Having + V-ed/V3 (active)
‚Ä¢ Having been + V-ed/V3 (passive)

<strong>V√≠ d·ª•:</strong>
‚Ä¢ Having completed the marathon, she felt proud of herself. (Sau khi ho√†n th√†nh marathon, c√¥ ·∫•y c·∫£m th·∫•y t·ª± h√†o v·ªÅ b·∫£n th√¢n)
‚Ä¢ Having been advised by the doctor, he changed his diet. (Sau khi ƒë∆∞·ª£c b√°c sƒ© t∆∞ v·∫•n, anh ·∫•y thay ƒë·ªïi ch·∫ø ƒë·ªô ƒÉn)

<strong>C√°ch d√πng:</strong>
1. R√∫t g·ªçn m·ªánh ƒë·ªÅ th·ªùi gian: After he had exercised ‚Üí Having exercised
2. R√∫t g·ªçn m·ªánh ƒë·ªÅ nguy√™n nh√¢n: Because she had eaten well ‚Üí Having eaten well`
            }
        };
        
        const comprehensiveTest = [
            { question: "_____ in the gym for two hours, Mark felt exhausted.", options: ["Exercise", "Exercising", "Having exercised", "To exercise"], correct: 2 },
            { question: "The best way _____ weight is combining diet and exercise.", options: ["lose", "to lose", "losing", "lost"], correct: 1 },
            { question: "_____ a healthy breakfast, she went to work.", options: ["Eat", "Eating", "Having eaten", "To eat"], correct: 2 },
            { question: "People _____ regularly tend to live longer.", options: ["exercise", "exercising", "exercised", "to exercise"], correct: 1 },
            { question: "_____ by the doctor, he started a new diet plan.", options: ["Advise", "Advising", "Having been advised", "To advise"], correct: 2 },
            { question: "She went to the gym _____ fit.", options: ["stay", "staying", "to stay", "stayed"], correct: 2 },
            { question: "_____ the importance of health, many people exercise daily.", options: ["Understand", "Understanding", "To understand", "Understood"], correct: 1 },
            { question: "He regrets not _____ care of his health earlier.", options: ["take", "taking", "having taken", "to take"], correct: 2 },
            { question: "_____ from the workout, she drank water.", options: ["Tire", "Tiring", "Tired", "To tire"], correct: 2 },
            { question: "The program _____ by experts helps people lose weight.", options: ["design", "designing", "designed", "to design"], correct: 2 },
            { question: "_____ enough sleep is essential for good health.", options: ["Get", "Getting", "To get", "Got"], correct: 1 },
            { question: "_____ her goal, she celebrated with friends.", options: ["Achieve", "Achieving", "Having achieved", "To achieve"], correct: 2 },
            { question: "It's important _____ a balanced diet.", options: ["maintain", "maintaining", "to maintain", "maintained"], correct: 2 },
            { question: "_____ in the morning, he feels more energetic.", options: ["Run", "Running", "To run", "Ran"], correct: 1 },
            { question: "_____ the marathon, she trained for six months.", options: ["Complete", "Completing", "To complete", "Completed"], correct: 2 },
            { question: "The food _____ at the restaurant was very nutritious.", options: ["serve", "serving", "served", "to serve"], correct: 2 },
            { question: "_____ stressed, meditation can help you relax.", options: ["Feel", "Feeling", "To feel", "Felt"], correct: 1 },
            { question: "He denied _____ junk food regularly.", options: ["eat", "eating", "having eaten", "to eat"], correct: 2 },
            { question: "_____ by her success, others started exercising too.", options: ["Inspire", "Inspiring", "Inspired", "To inspire"], correct: 2 },
            { question: "She exercises _____ her stamina.", options: ["improve", "improving", "to improve", "improved"], correct: 2 },
            { question: "_____ the health benefits, he quit smoking.", options: ["Realize", "Realizing", "Having realized", "To realize"], correct: 2 },
            { question: "The doctor recommended _____ more vegetables.", options: ["eat", "eating", "to eat", "ate"], correct: 1 },
            { question: "_____ well last night, she felt refreshed.", options: ["Sleep", "Sleeping", "Having slept", "To sleep"], correct: 2 },
            { question: "People _____ to stay healthy should exercise regularly.", options: ["want", "wanting", "wanted", "to want"], correct: 1 },
            { question: "_____ the gym membership, he started working out.", options: ["Buy", "Buying", "Having bought", "To buy"], correct: 2 },
            { question: "It's necessary _____ enough water daily.", options: ["drink", "drinking", "to drink", "drank"], correct: 2 },
            { question: "_____ about nutrition, she changed her eating habits.", options: ["Learn", "Learning", "Having learned", "To learn"], correct: 2 },
            { question: "The exercises _____ by the trainer are very effective.", options: ["recommend", "recommending", "recommended", "to recommend"], correct: 2 },
            { question: "_____ healthy requires discipline and commitment.", options: ["Stay", "Staying", "To stay", "Stayed"], correct: 1 },
            { question: "_____ her fitness goals, she felt accomplished.", options: ["Reach", "Reaching", "Having reached", "To reach"], correct: 2 }
        ];

        let dataHandler = {
            onDataChanged(data) {
                if (data.length > 0) {
                    const record = data[0];
                    appState.progressData = record;
                    
                    if (record.current_vocab_index !== undefined) {
                        appState.currentVocabIndex = record.current_vocab_index;
                    }
                    if (record.completed_vocab_cards) {
                        appState.completedVocabCards = new Set(record.completed_vocab_cards.split(',').filter(x => x));
                    }
                    if (record.reading_answers) {
                        appState.readingAnswers = JSON.parse(record.reading_answers);
                    }
                    if (record.grammar_answers) {
                        appState.grammarAnswers = JSON.parse(record.grammar_answers);
                    }
                    if (record.vocab_quiz_answers) {
                        appState.vocabQuizAnswers = JSON.parse(record.vocab_quiz_answers);
                    }
                    
                    renderApp();
                }
            }
        };

        async function initializeApp() {
            try {
                if (window.dataSdk) {
                    const initResult = await window.dataSdk.init(dataHandler);
                    if (!initResult.isOk) {
                        console.error("Failed to initialize data SDK");
                    }
                }
            } catch (error) {
                console.error("Error initializing data SDK:", error);
            }
            
            // Always render the app regardless of SDK status
            renderApp();
        }

        async function updateProgress() {
            try {
                if (!window.dataSdk) return;
                
                const vocabProgress = (appState.completedVocabCards.size / vocabularyData.length) * 100;
                const readingProgress = (Object.keys(appState.readingAnswers).length / readingQuestions.length) * 100;
                const grammarProgress = (Object.keys(appState.grammarAnswers).length / comprehensiveTest.length) * 100;
                const vocabQuizProgress = (Object.keys(appState.vocabQuizAnswers).length / vocabularyQuiz.length) * 100;
                
                const progressRecord = {
                    vocabulary_progress: vocabProgress,
                    reading_progress: readingProgress,
                    grammar_progress: grammarProgress,
                    vocab_quiz_progress: vocabQuizProgress,
                    completed_vocab_cards: Array.from(appState.completedVocabCards).join(','),
                    reading_answers: JSON.stringify(appState.readingAnswers),
                    grammar_answers: JSON.stringify(appState.grammarAnswers),
                    vocab_quiz_answers: JSON.stringify(appState.vocabQuizAnswers)
                };
                
                if (appState.progressData && appState.progressData.__backendId) {
                    await window.dataSdk.update({ ...progressRecord, __backendId: appState.progressData.__backendId });
                } else {
                    await window.dataSdk.create(progressRecord);
                }
            } catch (error) {
                console.error("Error updating progress:", error);
            }
        }

        function playSound(isCorrect) {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            if (isCorrect) {
                oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1);
                oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2);
            } else {
                oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(150, audioContext.currentTime + 0.15);
            }
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        }

        function calculateTotalProgress() {
            const vocabProgress = (appState.completedVocabCards.size / vocabularyData.length) * 100;
            const readingProgress = (Object.keys(appState.readingAnswers).length / readingQuestions.length) * 100;
            const grammarProgress = (Object.keys(appState.grammarAnswers).length / comprehensiveTest.length) * 100;
            return (vocabProgress + readingProgress + grammarProgress) / 3;
        }

        function createProgressRing(percentage, size = 80) {
            const radius = (size - 10) / 2;
            const circumference = 2 * Math.PI * radius;
            const offset = circumference - (percentage / 100) * circumference;
            
            return `
                <svg width="${size}" height="${size}" class="progress-ring">
                    <circle cx="${size/2}" cy="${size/2}" r="${radius}" 
                            stroke="#e5e7eb" stroke-width="8" fill="none"/>
                    <circle cx="${size/2}" cy="${size/2}" r="${radius}" 
                            class="progress-ring-circle"
                            stroke="currentColor" stroke-width="8" fill="none"
                            stroke-dasharray="${circumference}"
                            stroke-dashoffset="${offset}"
                            stroke-linecap="round"/>
                </svg>
            `;
        }

        function renderApp() {
            const config = window.elementSdk?.config || defaultConfig;
            const customFont = config.font_family || defaultConfig.font_family;
            const baseFontStack = 'Segoe UI, Tahoma, Geneva, Verdana, sans-serif';
            const baseSize = config.font_size || defaultConfig.font_size;
            
            const app = document.getElementById('app');
            app.style.backgroundColor = config.background_color || defaultConfig.background_color;
            app.style.color = config.text_color || defaultConfig.text_color;
            app.style.fontFamily = `${customFont}, ${baseFontStack}`;
            app.style.fontSize = `${baseSize}px`;
            
            const totalProgress = calculateTotalProgress();
            const vocabProgress = (appState.completedVocabCards.size / vocabularyData.length) * 100;
            const readingProgress = (Object.keys(appState.readingAnswers).length / readingQuestions.length) * 100;
            const grammarProgress = (Object.keys(appState.grammarAnswers).length / comprehensiveTest.length) * 100;
            
            app.innerHTML = `
                <div class="min-h-full flex flex-col" style="background-color: ${config.background_color || defaultConfig.background_color};">
                    <!-- Header -->
                    <header class="p-3 sm:p-6 shadow-md" style="background-color: ${config.surface_color || defaultConfig.surface_color};">
                        <div class="max-w-6xl mx-auto">
                            <!-- Mobile Layout -->
                            <div class="block sm:hidden">
                                <div class="flex justify-between items-center mb-3">
                                    <a href="https://nckhthptnk.github.io/tienganh11/" 
                                       target="_blank" 
                                       rel="noopener noreferrer"
                                       class="px-3 py-2 rounded-lg font-medium transition-colors text-sm"
                                       style="background-color: ${config.secondary_action_color || defaultConfig.secondary_action_color}; color: white; font-size: ${baseSize * 0.875}px;">
                                        ${config.home_button_text || defaultConfig.home_button_text}
                                    </a>
                                </div>
                                <h1 class="font-bold text-center mb-4" style="font-size: ${baseSize * 1.5}px; color: ${config.text_color || defaultConfig.text_color};">
                                    ${config.unit_title || defaultConfig.unit_title}
                                </h1>
                            </div>
                            
                            <!-- Desktop Layout -->
                            <div class="hidden sm:block">
                                <div class="relative flex items-center mb-4">
                                    <a href="https://nckhthptnk.github.io/tienganh11/" 
                                       target="_blank" 
                                       rel="noopener noreferrer"
                                       class="px-4 py-2 rounded-lg font-medium transition-colors"
                                       style="background-color: ${config.secondary_action_color || defaultConfig.secondary_action_color}; color: white; font-size: ${baseSize}px;">
                                        ${config.home_button_text || defaultConfig.home_button_text}
                                    </a>
                                    <h1 class="font-bold absolute left-1/2 transform -translate-x-1/2" style="font-size: ${baseSize * 1.75}px; color: ${config.text_color || defaultConfig.text_color};">
                                        ${config.unit_title || defaultConfig.unit_title}
                                    </h1>
                                </div>
                            </div>
                            
                            <!-- Progress Section -->
                            <div class="mt-4 sm:mt-6">
                                <h2 class="font-semibold mb-3 sm:mb-4 text-center sm:text-left" style="font-size: ${baseSize * 1.125}px; color: ${config.text_color || defaultConfig.text_color};">
                                    üìä Ti·∫øn ƒë·ªô h·ªçc t·∫≠p
                                </h2>
                                
                                <!-- Mobile: 2x2 Grid -->
                                <div class="grid grid-cols-2 gap-3 sm:hidden">
                                    <div class="text-center p-3 rounded-lg" style="background-color: ${config.background_color || defaultConfig.background_color};">
                                        <div class="flex justify-center mb-2" style="color: ${config.primary_action_color || defaultConfig.primary_action_color};">
                                            ${createProgressRing(totalProgress, 50)}
                                        </div>
                                        <div class="font-bold" style="font-size: ${baseSize}px; color: ${config.text_color || defaultConfig.text_color};">
                                            ${Math.round(totalProgress)}%
                                        </div>
                                        <div style="font-size: ${baseSize * 0.75}px; color: ${config.text_color || defaultConfig.text_color}; opacity: 0.7;">
                                            T·ªïng
                                        </div>
                                    </div>
                                    <div class="text-center p-3 rounded-lg" style="background-color: ${config.background_color || defaultConfig.background_color};">
                                        <div class="flex justify-center mb-2" style="color: ${config.primary_action_color || defaultConfig.primary_action_color};">
                                            ${createProgressRing(vocabProgress, 50)}
                                        </div>
                                        <div class="font-bold" style="font-size: ${baseSize}px; color: ${config.text_color || defaultConfig.text_color};">
                                            ${Math.round(vocabProgress)}%
                                        </div>
                                        <div style="font-size: ${baseSize * 0.75}px; color: ${config.text_color || defaultConfig.text_color}; opacity: 0.7;">
                                            T·ª´ v·ª±ng
                                        </div>
                                    </div>
                                    <div class="text-center p-3 rounded-lg" style="background-color: ${config.background_color || defaultConfig.background_color};">
                                        <div class="flex justify-center mb-2" style="color: ${config.primary_action_color || defaultConfig.primary_action_color};">
                                            ${createProgressRing(readingProgress, 50)}
                                        </div>
                                        <div class="font-bold" style="font-size: ${baseSize}px; color: ${config.text_color || defaultConfig.text_color};">
                                            ${Math.round(readingProgress)}%
                                        </div>
                                        <div style="font-size: ${baseSize * 0.75}px; color: ${config.text_color || defaultConfig.text_color}; opacity: 0.7;">
                                            B√†i ƒë·ªçc
                                        </div>
                                    </div>
                                    <div class="text-center p-3 rounded-lg" style="background-color: ${config.background_color || defaultConfig.background_color};">
                                        <div class="flex justify-center mb-2" style="color: ${config.primary_action_color || defaultConfig.primary_action_color};">
                                            ${createProgressRing(grammarProgress, 50)}
                                        </div>
                                        <div class="font-bold" style="font-size: ${baseSize}px; color: ${config.text_color || defaultConfig.text_color};">
                                            ${Math.round(grammarProgress)}%
                                        </div>
                                        <div style="font-size: ${baseSize * 0.75}px; color: ${config.text_color || defaultConfig.text_color}; opacity: 0.7;">
                                            Ng·ªØ ph√°p
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Desktop: 1x4 Grid -->
                                <div class="hidden sm:grid grid-cols-4 gap-4">
                                    <div class="text-center p-4 rounded-lg" style="background-color: ${config.background_color || defaultConfig.background_color};">
                                        <div class="flex justify-center mb-2" style="color: ${config.primary_action_color || defaultConfig.primary_action_color};">
                                            ${createProgressRing(totalProgress, 70)}
                                        </div>
                                        <div class="font-bold" style="font-size: ${baseSize * 1.25}px; color: ${config.text_color || defaultConfig.text_color};">
                                            ${Math.round(totalProgress)}%
                                        </div>
                                        <div style="font-size: ${baseSize * 0.875}px; color: ${config.text_color || defaultConfig.text_color}; opacity: 0.7;">
                                            T·ªïng
                                        </div>
                                    </div>
                                    <div class="text-center p-4 rounded-lg" style="background-color: ${config.background_color || defaultConfig.background_color};">
                                        <div class="flex justify-center mb-2" style="color: ${config.primary_action_color || defaultConfig.primary_action_color};">
                                            ${createProgressRing(vocabProgress, 70)}
                                        </div>
                                        <div class="font-bold" style="font-size: ${baseSize * 1.25}px; color: ${config.text_color || defaultConfig.text_color};">
                                            ${Math.round(vocabProgress)}%
                                        </div>
                                        <div style="font-size: ${baseSize * 0.875}px; color: ${config.text_color || defaultConfig.text_color}; opacity: 0.7;">
                                            T·ª´ v·ª±ng
                                        </div>
                                    </div>
                                    <div class="text-center p-4 rounded-lg" style="background-color: ${config.background_color || defaultConfig.background_color};">
                                        <div class="flex justify-center mb-2" style="color: ${config.primary_action_color || defaultConfig.primary_action_color};">
                                            ${createProgressRing(readingProgress, 70)}
                                        </div>
                                        <div class="font-bold" style="font-size: ${baseSize * 1.25}px; color: ${config.text_color || defaultConfig.text_color};">
                                            ${Math.round(readingProgress)}%
                                        </div>
                                        <div style="font-size: ${baseSize * 0.875}px; color: ${config.text_color || defaultConfig.text_color}; opacity: 0.7;">
                                            B√†i ƒë·ªçc
                                        </div>
                                    </div>
                                    <div class="text-center p-4 rounded-lg" style="background-color: ${config.background_color || defaultConfig.background_color};">
                                        <div class="flex justify-center mb-2" style="color: ${config.primary_action_color || defaultConfig.primary_action_color};">
                                            ${createProgressRing(grammarProgress, 70)}
                                        </div>
                                        <div class="font-bold" style="font-size: ${baseSize * 1.25}px; color: ${config.text_color || defaultConfig.text_color};">
                                            ${Math.round(grammarProgress)}%
                                        </div>
                                        <div style="font-size: ${baseSize * 0.875}px; color: ${config.text_color || defaultConfig.text_color}; opacity: 0.7;">
                                            Ng·ªØ ph√°p
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Navigation Tabs -->
                            <div class="mt-4 sm:mt-6">
                                <!-- Mobile: Grid Layout -->
                                <div class="grid grid-cols-2 gap-2 sm:hidden">
                                    <button onclick="switchSection('vocabulary')" 
                                            class="px-3 py-2 rounded-lg font-medium transition-colors text-center ${appState.currentSection === 'vocabulary' ? 'shadow-md' : ''}"
                                            style="background-color: ${appState.currentSection === 'vocabulary' ? (config.primary_action_color || defaultConfig.primary_action_color) : (config.secondary_action_color || defaultConfig.secondary_action_color)}; color: white; font-size: ${baseSize * 0.875}px;">
                                        üìö T·ª´ v·ª±ng
                                    </button>
                                    <button onclick="switchSection('reading')" 
                                            class="px-3 py-2 rounded-lg font-medium transition-colors text-center ${appState.currentSection === 'reading' ? 'shadow-md' : ''}"
                                            style="background-color: ${appState.currentSection === 'reading' ? (config.primary_action_color || defaultConfig.primary_action_color) : (config.secondary_action_color || defaultConfig.secondary_action_color)}; color: white; font-size: ${baseSize * 0.875}px;">
                                        üìñ B√†i ƒë·ªçc
                                    </button>
                                    <button onclick="switchSection('grammar')" 
                                            class="px-3 py-2 rounded-lg font-medium transition-colors text-center ${appState.currentSection === 'grammar' ? 'shadow-md' : ''}"
                                            style="background-color: ${appState.currentSection === 'grammar' ? (config.primary_action_color || defaultConfig.primary_action_color) : (config.secondary_action_color || defaultConfig.secondary_action_color)}; color: white; font-size: ${baseSize * 0.875}px;">
                                        ‚úèÔ∏è Ng·ªØ ph√°p
                                    </button>
                                    <button onclick="switchSection('healthy')" 
                                            class="px-3 py-2 rounded-lg font-medium transition-colors text-center ${appState.currentSection === 'healthy' ? 'shadow-md' : ''}"
                                            style="background-color: ${appState.currentSection === 'healthy' ? (config.primary_action_color || defaultConfig.primary_action_color) : (config.secondary_action_color || defaultConfig.secondary_action_color)}; color: white; font-size: ${baseSize * 0.875}px;">
                                        üí° L·ªëi s·ªëng
                                    </button>
                                </div>
                                
                                <!-- Desktop: Horizontal Layout -->
                                <div class="hidden sm:flex gap-2 overflow-x-auto">
                                    <button onclick="switchSection('vocabulary')" 
                                            class="px-6 py-3 rounded-lg font-medium transition-colors whitespace-nowrap ${appState.currentSection === 'vocabulary' ? 'shadow-md' : ''}"
                                            style="background-color: ${appState.currentSection === 'vocabulary' ? (config.primary_action_color || defaultConfig.primary_action_color) : (config.secondary_action_color || defaultConfig.secondary_action_color)}; color: white; font-size: ${baseSize}px;">
                                        üìö T·ª´ v·ª±ng
                                    </button>
                                    <button onclick="switchSection('reading')" 
                                            class="px-6 py-3 rounded-lg font-medium transition-colors whitespace-nowrap ${appState.currentSection === 'reading' ? 'shadow-md' : ''}"
                                            style="background-color: ${appState.currentSection === 'reading' ? (config.primary_action_color || defaultConfig.primary_action_color) : (config.secondary_action_color || defaultConfig.secondary_action_color)}; color: white; font-size: ${baseSize}px;">
                                        üìñ B√†i ƒë·ªçc
                                    </button>
                                    <button onclick="switchSection('grammar')" 
                                            class="px-6 py-3 rounded-lg font-medium transition-colors whitespace-nowrap ${appState.currentSection === 'grammar' ? 'shadow-md' : ''}"
                                            style="background-color: ${appState.currentSection === 'grammar' ? (config.primary_action_color || defaultConfig.primary_action_color) : (config.secondary_action_color || defaultConfig.secondary_action_color)}; color: white; font-size: ${baseSize}px;">
                                        ‚úèÔ∏è Ng·ªØ ph√°p
                                    </button>
                                    <button onclick="switchSection('healthy')" 
                                            class="px-6 py-3 rounded-lg font-medium transition-colors whitespace-nowrap ${appState.currentSection === 'healthy' ? 'shadow-md' : ''}"
                                            style="background-color: ${appState.currentSection === 'healthy' ? (config.primary_action_color || defaultConfig.primary_action_color) : (config.secondary_action_color || defaultConfig.secondary_action_color)}; color: white; font-size: ${baseSize}px;">
                                        üí° Healthy Lifestyle
                                    </button>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    <!-- Main Content -->
                    <main class="flex-1 p-4 sm:p-6">
                        <div class="max-w-6xl mx-auto">
                            <div id="content-area" class="animate-slide-in">
                                ${renderContent()}
                            </div>
                        </div>
                    </main>
                </div>
            `;
            
            setupKeyboardListeners();
        }

        function renderContent() {
            switch(appState.currentSection) {
                case 'vocabulary':
                    return renderVocabulary();
                case 'reading':
                    return renderReading();
                case 'healthy':
                    return renderHealthyLifestyle();
                case 'grammar':
                    return renderGrammar();
                default:
                    return '';
            }
        }

        function renderVocabulary() {
            const config = window.elementSdk?.config || defaultConfig;
            const baseSize = config.font_size || defaultConfig.font_size;
            
            return `
                <div class="max-w-4xl mx-auto">
                    <!-- Sub Navigation -->
                    <div class="flex gap-2 mb-6 justify-center">
                        <button onclick="switchVocabSection('flashcards')" 
                                class="px-6 py-3 rounded-lg font-medium transition-colors ${appState.vocabSubSection === 'flashcards' ? 'shadow-md' : ''}"
                                style="background-color: ${appState.vocabSubSection === 'flashcards' ? (config.primary_action_color || defaultConfig.primary_action_color) : (config.secondary_action_color || defaultConfig.secondary_action_color)}; color: white; font-size: ${baseSize}px;">
                            üìö H·ªçc t·ª´ v·ª±ng
                        </button>
                        <button onclick="switchVocabSection('quiz')" 
                                class="px-6 py-3 rounded-lg font-medium transition-colors ${appState.vocabSubSection === 'quiz' ? 'shadow-md' : ''}"
                                style="background-color: ${appState.vocabSubSection === 'quiz' ? (config.primary_action_color || defaultConfig.primary_action_color) : (config.secondary_action_color || defaultConfig.secondary_action_color)}; color: white; font-size: ${baseSize}px;">
                            üß† Ki·ªÉm tra
                        </button>
                    </div>
                    
                    ${appState.vocabSubSection === 'flashcards' ? renderFlashcards() : renderVocabQuiz()}
                </div>
            `;
        }

        function renderFlashcards() {
            const config = window.elementSdk?.config || defaultConfig;
            const baseSize = config.font_size || defaultConfig.font_size;
            const card = vocabularyData[appState.currentVocabIndex];
            
            return `
                <div class="max-w-2xl mx-auto">
                    <div class="mb-6 text-center">
                        <div style="font-size: ${baseSize * 0.875}px; color: ${config.text_color || defaultConfig.text_color}; opacity: 0.7;">
                            Th·∫ª ${appState.currentVocabIndex + 1} / ${vocabularyData.length}
                        </div>
                        <div class="w-full rounded-full h-2 mt-2" style="background-color: ${config.background_color || defaultConfig.background_color};">
                            <div class="h-2 rounded-full transition-all" 
                                 style="width: ${((appState.currentVocabIndex + 1) / vocabularyData.length) * 100}%; background-color: ${config.primary_action_color || defaultConfig.primary_action_color};">
                            </div>
                        </div>
                    </div>
                    
                    <div class="flashcard ${appState.isFlipped ? 'flipped' : ''}" 
                         onclick="flipCard()"
                         style="height: 350px; max-height: 70vh;">
                        <div class="flashcard-inner">
                            <div class="flashcard-front shadow-xl" 
                                 style="background-color: ${config.surface_color || defaultConfig.surface_color}; border: 3px solid ${config.primary_action_color || defaultConfig.primary_action_color};">
                                <div class="text-center px-4">
                                    <div class="font-bold mb-3 sm:mb-4" 
                                         style="font-size: ${baseSize * 2}px; color: ${config.primary_action_color || defaultConfig.primary_action_color};">
                                        ${card.word}
                                    </div>
                                    <div class="mb-2" 
                                         style="font-size: ${baseSize}px; color: ${config.text_color || defaultConfig.text_color}; opacity: 0.7;">
                                        ${card.ipa}
                                    </div>
                                    <div class="px-3 py-1 rounded-full inline-block" 
                                         style="background-color: ${config.background_color || defaultConfig.background_color}; font-size: ${baseSize * 0.75}px; color: ${config.text_color || defaultConfig.text_color};">
                                        ${card.type}
                                    </div>
                                </div>
                                <div class="mt-6 sm:mt-8 text-center px-2" 
                                     style="font-size: ${baseSize * 0.75}px; color: ${config.text_color || defaultConfig.text_color}; opacity: 0.5;">
                                    <div class="hidden sm:block">Space: L·∫≠t th·∫ª | ‚Üê: L√πi | ‚Üí: Ti·∫øp | Click: L·∫≠t th·∫ª</div>
                                    <div class="sm:hidden">Ch·∫°m ƒë·ªÉ l·∫≠t th·∫ª</div>
                                </div>
                            </div>
                            
                            <div class="flashcard-back shadow-xl" 
                                 style="background-color: ${config.primary_action_color || defaultConfig.primary_action_color}; color: white;">
                                <div class="text-center px-4">
                                    <div class="font-bold mb-3 sm:mb-4" 
                                         style="font-size: ${baseSize * 1.5}px;">
                                        ${card.meaning}
                                    </div>
                                    <div class="mt-4 sm:mt-6 p-3 sm:p-4 rounded-lg" 
                                         style="background-color: rgba(255,255,255,0.2); font-size: ${baseSize * 0.875}px;">
                                        <div class="font-semibold mb-2" style="font-size: ${baseSize}px;">
                                            V√≠ d·ª•:
                                        </div>
                                        <div style="font-style: italic; line-height: 1.4;">
                                            "${card.example}"
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mobile Controls -->
                    <div class="flex flex-col gap-3 mt-6 sm:hidden">
                        <button onclick="speakWord('${card.word}')" 
                                class="w-full py-3 rounded-lg font-medium transition-colors"
                                style="background-color: ${config.primary_action_color || defaultConfig.primary_action_color}; color: white; font-size: ${baseSize}px;">
                            üîä Ph√°t √¢m
                        </button>
                        <div class="flex gap-3">
                            <button onclick="previousCard()" 
                                    ${appState.currentVocabIndex === 0 ? 'disabled' : ''}
                                    class="flex-1 py-3 rounded-lg font-medium transition-colors disabled:opacity-50"
                                    style="background-color: ${config.secondary_action_color || defaultConfig.secondary_action_color}; color: white; font-size: ${baseSize}px;">
                                ‚Üê L√πi
                            </button>
                            <button onclick="nextCard()" 
                                    ${appState.currentVocabIndex === vocabularyData.length - 1 ? 'disabled' : ''}
                                    class="flex-1 py-3 rounded-lg font-medium transition-colors disabled:opacity-50"
                                    style="background-color: ${config.secondary_action_color || defaultConfig.secondary_action_color}; color: white; font-size: ${baseSize}px;">
                                Ti·∫øp ‚Üí
                            </button>
                        </div>
                    </div>
                    
                    <!-- Desktop Controls -->
                    <div class="hidden sm:flex justify-between items-center mt-6 gap-4">
                        <button onclick="previousCard()" 
                                ${appState.currentVocabIndex === 0 ? 'disabled' : ''}
                                class="px-8 py-3 rounded-lg font-medium transition-colors disabled:opacity-50"
                                style="background-color: ${config.secondary_action_color || defaultConfig.secondary_action_color}; color: white; font-size: ${baseSize}px;">
                            ‚Üê L√πi
                        </button>
                        
                        <button onclick="speakWord('${card.word}')" 
                                class="px-6 py-3 rounded-lg font-medium transition-colors"
                                style="background-color: ${config.primary_action_color || defaultConfig.primary_action_color}; color: white; font-size: ${baseSize}px;">
                            üîä Ph√°t √¢m
                        </button>
                        
                        <button onclick="nextCard()" 
                                ${appState.currentVocabIndex === vocabularyData.length - 1 ? 'disabled' : ''}
                                class="px-8 py-3 rounded-lg font-medium transition-colors disabled:opacity-50"
                                style="background-color: ${config.secondary_action_color || defaultConfig.secondary_action_color}; color: white; font-size: ${baseSize}px;">
                            Ti·∫øp ‚Üí
                        </button>
                    </div>
                </div>
            `;
        }

        function renderVocabQuiz() {
            const config = window.elementSdk?.config || defaultConfig;
            const baseSize = config.font_size || defaultConfig.font_size;
            const question = vocabularyQuiz[appState.currentQuizIndex];
            
            return `
                <div class="max-w-2xl mx-auto">
                    <div class="mb-6 text-center">
                        <div style="font-size: ${baseSize * 0.875}px; color: ${config.text_color || defaultConfig.text_color}; opacity: 0.7;">
                            C√¢u ${appState.currentQuizIndex + 1} / ${vocabularyQuiz.length}
                        </div>
                        <div class="w-full rounded-full h-2 mt-2" style="background-color: ${config.background_color || defaultConfig.background_color};">
                            <div class="h-2 rounded-full transition-all" 
                                 style="width: ${((appState.currentQuizIndex + 1) / vocabularyQuiz.length) * 100}%; background-color: ${config.primary_action_color || defaultConfig.primary_action_color};">
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-6 sm:p-8 rounded-xl shadow-lg mb-6" 
                         style="background-color: ${config.surface_color || defaultConfig.surface_color};">
                        <div class="font-bold mb-6 text-center" 
                             style="font-size: ${baseSize * 1.5}px; color: ${config.primary_action_color || defaultConfig.primary_action_color};">
                            ${question.question}
                        </div>
                        
                        <div class="space-y-3">
                            ${question.options.map((option, optIdx) => {
                                const isSelected = appState.vocabQuizAnswers[appState.currentQuizIndex] === optIdx;
                                const isCorrect = optIdx === question.correct;
                                const showResult = appState.vocabQuizAnswers[appState.currentQuizIndex] !== undefined;
                                
                                let bgColor = config.surface_color || defaultConfig.surface_color;
                                let borderColor = 'transparent';
                                
                                if (showResult) {
                                    if (isCorrect) {
                                        bgColor = '#10b981';
                                    } else if (isSelected) {
                                        bgColor = '#ef4444';
                                    }
                                } else if (isSelected) {
                                    bgColor = config.primary_action_color || defaultConfig.primary_action_color;
                                    borderColor = config.primary_action_color || defaultConfig.primary_action_color;
                                } else {
                                    borderColor = config.background_color || defaultConfig.background_color;
                                }
                                
                                return `
                                    <button onclick="selectVocabQuizAnswer(${optIdx})"
                                            ${showResult ? 'disabled' : ''}
                                            class="w-full text-left p-4 rounded-lg transition-all transform hover:scale-105"
                                            style="background-color: ${bgColor}; 
                                                   color: ${showResult || isSelected ? 'white' : (config.text_color || defaultConfig.text_color)}; 
                                                   font-size: ${baseSize}px; 
                                                   border: 2px solid ${borderColor};
                                                   box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        ${String.fromCharCode(65 + optIdx)}. ${option}
                                        ${showResult && isCorrect ? ' ‚úì' : ''}
                                        ${showResult && isSelected && !isCorrect ? ' ‚úó' : ''}
                                    </button>
                                `;
                            }).join('')}
                        </div>
                        
                        ${appState.vocabQuizAnswers[appState.currentQuizIndex] !== undefined ? `
                            <div class="mt-6 p-4 rounded-lg text-center" 
                                 style="background-color: ${appState.vocabQuizAnswers[appState.currentQuizIndex] === question.correct ? '#dcfce7' : '#fef2f2'}; 
                                        color: ${appState.vocabQuizAnswers[appState.currentQuizIndex] === question.correct ? '#166534' : '#991b1b'}; 
                                        font-size: ${baseSize}px;">
                                ${appState.vocabQuizAnswers[appState.currentQuizIndex] === question.correct ? 
                                    'üéâ Ch√≠nh x√°c! B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng.' : 
                                    '‚ùå Sai r·ªìi. ƒê√°p √°n ƒë√∫ng l√†: ' + question.options[question.correct]}
                            </div>
                        ` : ''}
                    </div>
                    
                    <div class="flex justify-between items-center gap-4">
                        <button onclick="previousQuiz()" 
                                ${appState.currentQuizIndex === 0 ? 'disabled' : ''}
                                class="px-6 py-3 rounded-lg font-medium transition-colors disabled:opacity-50"
                                style="background-color: ${config.secondary_action_color || defaultConfig.secondary_action_color}; color: white; font-size: ${baseSize}px;">
                            ‚Üê C√¢u tr∆∞·ªõc
                        </button>
                        
                        <div class="text-center" style="font-size: ${baseSize * 0.875}px; color: ${config.text_color || defaultConfig.text_color}; opacity: 0.7;">
                            ƒê√£ tr·∫£ l·ªùi: ${Object.keys(appState.vocabQuizAnswers).length}/${vocabularyQuiz.length}
                        </div>
                        
                        <button onclick="nextQuiz()" 
                                ${appState.currentQuizIndex === vocabularyQuiz.length - 1 ? 'disabled' : ''}
                                class="px-6 py-3 rounded-lg font-medium transition-colors disabled:opacity-50"
                                style="background-color: ${config.secondary_action_color || defaultConfig.secondary_action_color}; color: white; font-size: ${baseSize}px;">
                            C√¢u ti·∫øp ‚Üí
                        </button>
                    </div>
                </div>
            `;
        }

        function renderReading() {
            const config = window.elementSdk?.config || defaultConfig;
            const baseSize = config.font_size || defaultConfig.font_size;
            
            return `
                <div class="max-w-4xl mx-auto">
                    ${renderReadingText()}
                </div>
            `;
        }

        function renderReadingText() {
            const config = window.elementSdk?.config || defaultConfig;
            const baseSize = config.font_size || defaultConfig.font_size;
            
            return `
                <div>
                    <div class="p-6 sm:p-8 rounded-xl shadow-lg mb-6" 
                         style="background-color: ${config.surface_color || defaultConfig.surface_color};">
                        <h2 class="font-bold mb-6" 
                            style="font-size: ${baseSize * 1.5}px; color: ${config.primary_action_color || defaultConfig.primary_action_color};">
                            üìñ B√†i ƒë·ªçc: Online Learning Technology
                        </h2>
                        <div class="leading-relaxed" 
                             style="font-size: ${baseSize}px; color: ${config.text_color || defaultConfig.text_color}; line-height: 1.8;">
                            ${readingText}
                        </div>
                    </div>
                    
                    <div class="p-6 sm:p-8 rounded-xl shadow-lg" 
                         style="background-color: ${config.surface_color || defaultConfig.surface_color};">
                        <h3 class="font-bold mb-6" 
                            style="font-size: ${baseSize * 1.25}px; color: ${config.text_color || defaultConfig.text_color};">
                            ‚ùì C√¢u h·ªèi tr·∫Øc nghi·ªám
                        </h3>
                        ${readingQuestions.map((q, idx) => `
                            <div class="mb-6 p-4 rounded-lg" 
                                 style="background-color: ${config.background_color || defaultConfig.background_color};">
                                <div class="font-semibold mb-3" 
                                     style="font-size: ${baseSize}px; color: ${config.text_color || defaultConfig.text_color};">
                                    ${idx + 1}. ${q.question}
                                </div>
                                <div class="space-y-2">
                                    ${q.options.map((opt, optIdx) => {
                                        const isSelected = appState.readingAnswers[idx] === optIdx;
                                        const isCorrect = optIdx === q.correct;
                                        const showResult = appState.readingAnswers[idx] !== undefined;
                                        
                                        let bgColor = config.surface_color || defaultConfig.surface_color;
                                        if (showResult) {
                                            if (isCorrect) bgColor = '#10b981';
                                            else if (isSelected) bgColor = '#ef4444';
                                        } else if (isSelected) {
                                            bgColor = config.primary_action_color || defaultConfig.primary_action_color;
                                        }
                                        
                                        return `
                                            <button onclick="selectReadingAnswer(${idx}, ${optIdx})"
                                                    ${showResult ? 'disabled' : ''}
                                                    class="w-full text-left p-3 rounded-lg transition-colors"
                                                    style="background-color: ${bgColor}; color: ${showResult || isSelected ? 'white' : (config.text_color || defaultConfig.text_color)}; font-size: ${baseSize * 0.875}px; border: 2px solid ${isSelected ? (config.primary_action_color || defaultConfig.primary_action_color) : 'transparent'};">
                                                ${String.fromCharCode(65 + optIdx)}. ${opt}
                                                ${showResult && isCorrect ? ' ‚úì' : ''}
                                                ${showResult && isSelected && !isCorrect ? ' ‚úó' : ''}
                                            </button>
                                        `;
                                    }).join('')}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderHealthyLifestyle() {
            const config = window.elementSdk?.config || defaultConfig;
            const baseSize = config.font_size || defaultConfig.font_size;
            
            return `
                <div class="max-w-4xl mx-auto">
                    ${renderHealthyLifestyleTips()}
                </div>
            `;
        }

        function renderHealthyLifestyleTips() {
            const config = window.elementSdk?.config || defaultConfig;
            const baseSize = config.font_size || defaultConfig.font_size;
            
            const healthyTips = [
                {
                    icon: "ü•ó",
                    title: "Healthy Eating",
                    tips: [
                        "Eat plenty of fruits and vegetables daily",
                        "Choose whole grains over refined grains",
                        "Include lean proteins in your meals",
                        "Limit processed and sugary foods",
                        "Drink plenty of water throughout the day"
                    ]
                },
                {
                    icon: "üèÉ‚Äç‚ôÇÔ∏è",
                    title: "Regular Exercise",
                    tips: [
                        "Aim for at least 30 minutes of exercise daily",
                        "Include both cardio and strength training",
                        "Take the stairs instead of elevators",
                        "Walk or bike for short distances",
                        "Find activities you enjoy to stay motivated"
                    ]
                },
                {
                    icon: "üò¥",
                    title: "Quality Sleep",
                    tips: [
                        "Get 7-9 hours of sleep each night",
                        "Maintain a consistent sleep schedule",
                        "Create a relaxing bedtime routine",
                        "Avoid screens before bedtime",
                        "Keep your bedroom cool and dark"
                    ]
                },
                {
                    icon: "üßò‚Äç‚ôÄÔ∏è",
                    title: "Mental Health",
                    tips: [
                        "Practice stress management techniques",
                        "Meditate or practice mindfulness daily",
                        "Maintain social connections",
                        "Take breaks from work and technology",
                        "Seek help when you need it"
                    ]
                },
                {
                    icon: "üíß",
                    title: "Hydration",
                    tips: [
                        "Drink 8-10 glasses of water daily",
                        "Start your day with a glass of water",
                        "Carry a water bottle with you",
                        "Eat water-rich foods like fruits",
                        "Limit sugary and caffeinated drinks"
                    ]
                },
                {
                    icon: "üö≠",
                    title: "Avoid Bad Habits",
                    tips: [
                        "Don't smoke or use tobacco products",
                        "Limit alcohol consumption",
                        "Avoid excessive screen time",
                        "Don't skip meals regularly",
                        "Limit exposure to negative influences"
                    ]
                }
            ];
            
            return `
                <div class="p-6 sm:p-8 rounded-xl shadow-lg" 
                     style="background-color: ${config.surface_color || defaultConfig.surface_color};">
                    <h2 class="font-bold mb-8 text-center" 
                        style="font-size: ${baseSize * 1.75}px; color: ${config.primary_action_color || defaultConfig.primary_action_color};">
                        üí° Essential Tips for a Healthy Lifestyle
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        ${healthyTips.map(category => `
                            <div class="p-6 rounded-lg border-2 transition-all hover:shadow-lg" 
                                 style="background-color: ${config.background_color || defaultConfig.background_color}; border-color: ${config.primary_action_color || defaultConfig.primary_action_color};">
                                <div class="flex items-center mb-4">
                                    <span style="font-size: ${baseSize * 2}px;" class="mr-3">${category.icon}</span>
                                    <h3 class="font-bold" 
                                        style="font-size: ${baseSize * 1.25}px; color: ${config.primary_action_color || defaultConfig.primary_action_color};">
                                        ${category.title}
                                    </h3>
                                </div>
                                <ul class="space-y-3">
                                    ${category.tips.map(tip => `
                                        <li class="flex items-start">
                                            <span class="mr-3 mt-1" style="color: ${config.primary_action_color || defaultConfig.primary_action_color};">‚úì</span>
                                            <span style="font-size: ${baseSize * 0.9}px; color: ${config.text_color || defaultConfig.text_color}; line-height: 1.6;">
                                                ${tip}
                                            </span>
                                        </li>
                                    `).join('')}
                                </ul>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="mt-8 p-6 rounded-lg text-center" 
                         style="background-color: ${config.primary_action_color || defaultConfig.primary_action_color}; color: white;">
                        <h4 class="font-bold mb-3" style="font-size: ${baseSize * 1.25}px;">
                            üéØ Remember: Small Changes, Big Results!
                        </h4>
                        <p style="font-size: ${baseSize}px; line-height: 1.6;">
                            Start with one or two tips and gradually build healthy habits. 
                            Consistency is more important than perfection. Your future self will thank you!
                        </p>
                    </div>
                </div>
            `;
        }

        function renderGrammar() {
            const config = window.elementSdk?.config || defaultConfig;
            const baseSize = config.font_size || defaultConfig.font_size;
            
            return `
                <div class="max-w-4xl mx-auto">
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
                        ${Object.entries(grammarTopics).map(([key, topic]) => `
                            <button onclick="selectGrammarTopic('${key}')"
                                    class="p-4 rounded-lg font-medium transition-all ${appState.currentGrammarTopic === key ? 'shadow-lg' : 'shadow'}"
                                    style="background-color: ${appState.currentGrammarTopic === key ? (config.primary_action_color || defaultConfig.primary_action_color) : (config.surface_color || defaultConfig.surface_color)}; color: ${appState.currentGrammarTopic === key ? 'white' : (config.text_color || defaultConfig.text_color)}; font-size: ${baseSize * 0.875}px;">
                                ${topic.title}
                            </button>
                        `).join('')}
                        <button onclick="selectGrammarTopic('comprehensive')"
                                class="p-4 rounded-lg font-medium transition-all ${appState.currentGrammarTopic === 'comprehensive' ? 'shadow-lg' : 'shadow'}"
                                style="background-color: ${appState.currentGrammarTopic === 'comprehensive' ? (config.primary_action_color || defaultConfig.primary_action_color) : (config.surface_color || defaultConfig.surface_color)}; color: ${appState.currentGrammarTopic === 'comprehensive' ? 'white' : (config.text_color || defaultConfig.text_color)}; font-size: ${baseSize * 0.875}px;">
                            üìù B√†i t·∫≠p t·ªïng h·ª£p
                        </button>
                    </div>
                    
                    <div id="grammar-content" class="animate-slide-in">
                        ${renderGrammarContent()}
                    </div>
                </div>
            `;
        }

        function renderGrammarContent() {
            const config = window.elementSdk?.config || defaultConfig;
            const baseSize = config.font_size || defaultConfig.font_size;
            
            if (!appState.currentGrammarTopic) {
                return `
                    <div class="text-center p-12 rounded-xl" 
                         style="background-color: ${config.surface_color || defaultConfig.surface_color};">
                        <div style="font-size: ${baseSize * 3}px;">üìö</div>
                        <div class="mt-4" 
                             style="font-size: ${baseSize * 1.125}px; color: ${config.text_color || defaultConfig.text_color}; opacity: 0.7;">
                            Ch·ªçn m·ªôt ch·ªß ƒë·ªÅ ng·ªØ ph√°p ƒë·ªÉ b·∫Øt ƒë·∫ßu h·ªçc
                        </div>
                    </div>
                `;
            }
            
            if (appState.currentGrammarTopic === 'comprehensive') {
                return `
                    <div class="p-6 sm:p-8 rounded-xl shadow-lg" 
                         style="background-color: ${config.surface_color || defaultConfig.surface_color};">
                        <h3 class="font-bold mb-6" 
                            style="font-size: ${baseSize * 1.5}px; color: ${config.primary_action_color || defaultConfig.primary_action_color};">
                            üìù B√†i t·∫≠p t·ªïng h·ª£p (30 c√¢u)
                        </h3>
                        ${comprehensiveTest.map((q, idx) => `
                            <div class="mb-6 p-4 rounded-lg" 
                                 style="background-color: ${config.background_color || defaultConfig.background_color};">
                                <div class="font-semibold mb-3" 
                                     style="font-size: ${baseSize}px; color: ${config.text_color || defaultConfig.text_color};">
                                    ${idx + 1}. ${q.question}
                                </div>
                                <div class="space-y-2">
                                    ${q.options.map((opt, optIdx) => {
                                        const isSelected = appState.grammarAnswers[idx] === optIdx;
                                        const isCorrect = optIdx === q.correct;
                                        const showResult = appState.grammarAnswers[idx] !== undefined;
                                        
                                        let bgColor = config.surface_color || defaultConfig.surface_color;
                                        if (showResult) {
                                            if (isCorrect) bgColor = '#10b981';
                                            else if (isSelected) bgColor = '#ef4444';
                                        } else if (isSelected) {
                                            bgColor = config.primary_action_color || defaultConfig.primary_action_color;
                                        }
                                        
                                        return `
                                            <button onclick="selectGrammarAnswer(${idx}, ${optIdx})"
                                                    ${showResult ? 'disabled' : ''}
                                                    class="w-full text-left p-3 rounded-lg transition-colors"
                                                    style="background-color: ${bgColor}; color: ${showResult || isSelected ? 'white' : (config.text_color || defaultConfig.text_color)}; font-size: ${baseSize * 0.875}px; border: 2px solid ${isSelected ? (config.primary_action_color || defaultConfig.primary_action_color) : 'transparent'};">
                                                ${String.fromCharCode(65 + optIdx)}. ${opt}
                                                ${showResult && isCorrect ? ' ‚úì' : ''}
                                                ${showResult && isSelected && !isCorrect ? ' ‚úó' : ''}
                                            </button>
                                        `;
                                    }).join('')}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            const topic = grammarTopics[appState.currentGrammarTopic];
            return `
                <div class="p-6 sm:p-8 rounded-xl shadow-lg" 
                     style="background-color: ${config.surface_color || defaultConfig.surface_color};">
                    <h3 class="font-bold mb-6" 
                        style="font-size: ${baseSize * 1.5}px; color: ${config.primary_action_color || defaultConfig.primary_action_color};">
                        ${topic.title}
                    </h3>
                    <div class="leading-relaxed whitespace-pre-line" 
                         style="font-size: ${baseSize}px; color: ${config.text_color || defaultConfig.text_color}; line-height: 1.8;">
                        ${topic.theory}
                    </div>
                </div>
            `;
        }

        function switchSection(section) {
            appState.currentSection = section;
            renderApp();
        }

        async function flipCard() {
            appState.isFlipped = !appState.isFlipped;
            
            // ƒê√°nh d·∫•u th·∫ª hi·ªán t·∫°i ƒë√£ xem khi l·∫≠t th·∫ª
            appState.completedVocabCards.add(appState.currentVocabIndex.toString());
            await updateProgress();
            
            renderApp();
        }

        function speakWord(word) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US';
                utterance.rate = 0.8;
                utterance.pitch = 1;
                speechSynthesis.speak(utterance);
            }
        }

        async function nextCard() {
            if (appState.currentVocabIndex < vocabularyData.length - 1) {
                // ƒê√°nh d·∫•u th·∫ª hi·ªán t·∫°i ƒë√£ xem
                appState.completedVocabCards.add(appState.currentVocabIndex.toString());
                
                appState.currentVocabIndex++;
                appState.isFlipped = false;
                
                // ƒê√°nh d·∫•u th·∫ª m·ªõi c≈©ng ƒë√£ xem
                appState.completedVocabCards.add(appState.currentVocabIndex.toString());
                
                await updateProgress();
                renderApp();
                // Safely pronounce the next word after render completes
                setTimeout(() => {
                    try {
                        const currentWord = vocabularyData[appState.currentVocabIndex]?.word;
                        if (currentWord) {
                            speakWord(currentWord);
                        }
                    } catch (error) {
                        console.log('Pronunciation error:', error);
                    }
                }, 800);
            }
        }

        async function previousCard() {
            if (appState.currentVocabIndex > 0) {
                // ƒê√°nh d·∫•u th·∫ª hi·ªán t·∫°i ƒë√£ xem
                appState.completedVocabCards.add(appState.currentVocabIndex.toString());
                
                appState.currentVocabIndex--;
                appState.isFlipped = false;
                
                // ƒê√°nh d·∫•u th·∫ª m·ªõi c≈©ng ƒë√£ xem
                appState.completedVocabCards.add(appState.currentVocabIndex.toString());
                
                await updateProgress();
                renderApp();
                // Safely pronounce the previous word after render completes
                setTimeout(() => {
                    try {
                        const currentWord = vocabularyData[appState.currentVocabIndex]?.word;
                        if (currentWord) {
                            speakWord(currentWord);
                        }
                    } catch (error) {
                        console.log('Pronunciation error:', error);
                    }
                }, 800);
            }
        }



        async function markAsCompleted() {
            appState.completedVocabCards.add(appState.currentVocabIndex.toString());
            await updateProgress();
            renderApp();
        }

        async function selectReadingAnswer(questionIdx, optionIdx) {
            if (appState.readingAnswers[questionIdx] !== undefined) return;
            
            appState.readingAnswers[questionIdx] = optionIdx;
            const isCorrect = optionIdx === readingQuestions[questionIdx].correct;
            playSound(isCorrect);
            await updateProgress();
            renderApp();
        }

        async function selectGrammarAnswer(questionIdx, optionIdx) {
            if (appState.grammarAnswers[questionIdx] !== undefined) return;
            
            appState.grammarAnswers[questionIdx] = optionIdx;
            const isCorrect = optionIdx === comprehensiveTest[questionIdx].correct;
            playSound(isCorrect);
            await updateProgress();
            renderApp();
        }

        function selectGrammarTopic(topic) {
            appState.currentGrammarTopic = topic;
            renderApp();
        }

        function switchVocabSection(section) {
            appState.vocabSubSection = section;
            renderApp();
        }

        function switchReadingSection(section) {
            appState.readingSubSection = section;
            renderApp();
        }

        async function selectVocabQuizAnswer(optionIdx) {
            if (appState.vocabQuizAnswers[appState.currentQuizIndex] !== undefined) return;
            
            appState.vocabQuizAnswers[appState.currentQuizIndex] = optionIdx;
            const isCorrect = optionIdx === vocabularyQuiz[appState.currentQuizIndex].correct;
            playSound(isCorrect);
            await updateProgress();
            renderApp();
        }

        function nextQuiz() {
            if (appState.currentQuizIndex < vocabularyQuiz.length - 1) {
                appState.currentQuizIndex++;
                renderApp();
            }
        }

        function previousQuiz() {
            if (appState.currentQuizIndex > 0) {
                appState.currentQuizIndex--;
                renderApp();
            }
        }

        function setupKeyboardListeners() {
            // Remove existing listeners to prevent duplicates
            document.removeEventListener('keydown', handleKeydown);
            document.addEventListener('keydown', handleKeydown);
        }

        function handleKeydown(e) {
            // Only handle keyboard shortcuts when in vocabulary flashcard mode
            if (appState.currentSection === 'vocabulary' && appState.vocabSubSection === 'flashcards') {
                // Prevent default behavior for our handled keys
                if (e.key === ' ' || e.key === 'Spacebar' || e.key === 'ArrowRight' || e.key === 'ArrowLeft') {
                    e.preventDefault();
                    e.stopPropagation();
                }
                
                // Handle specific keys
                switch(e.key) {
                    case ' ':
                    case 'Spacebar':
                        flipCard();
                        break;
                    case 'ArrowRight':
                        if (appState.currentVocabIndex < vocabularyData.length - 1) {
                            nextCard();
                        }
                        break;
                    case 'ArrowLeft':
                        if (appState.currentVocabIndex > 0) {
                            previousCard();
                        }
                        break;
                }
            }
        }

        async function onConfigChange(config) {
            renderApp();
        }

        // Initialize Element SDK if available
        function initElementSdk() {
            if (window.elementSdk) {
                try {
                    window.elementSdk.init({
                        defaultConfig,
                        onConfigChange,
                        mapToCapabilities: (config) => ({
                            recolorables: [
                                {
                                    get: () => config.background_color || defaultConfig.background_color,
                                    set: (value) => {
                                        config.background_color = value;
                                        if (window.elementSdk) {
                                            window.elementSdk.setConfig({ background_color: value });
                                        }
                                    }
                                },
                                {
                                    get: () => config.surface_color || defaultConfig.surface_color,
                                    set: (value) => {
                                        config.surface_color = value;
                                        if (window.elementSdk) {
                                            window.elementSdk.setConfig({ surface_color: value });
                                        }
                                    }
                                },
                                {
                                    get: () => config.text_color || defaultConfig.text_color,
                                    set: (value) => {
                                        config.text_color = value;
                                        if (window.elementSdk) {
                                            window.elementSdk.setConfig({ text_color: value });
                                        }
                                    }
                                },
                                {
                                    get: () => config.primary_action_color || defaultConfig.primary_action_color,
                                    set: (value) => {
                                        config.primary_action_color = value;
                                        if (window.elementSdk) {
                                            window.elementSdk.setConfig({ primary_action_color: value });
                                        }
                                    }
                                },
                                {
                                    get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
                                    set: (value) => {
                                        config.secondary_action_color = value;
                                        if (window.elementSdk) {
                                            window.elementSdk.setConfig({ secondary_action_color: value });
                                        }
                                    }
                                }
                            ],
                            borderables: [],
                            fontEditable: {
                                get: () => config.font_family || defaultConfig.font_family,
                                set: (value) => {
                                    config.font_family = value;
                                    if (window.elementSdk) {
                                        window.elementSdk.setConfig({ font_family: value });
                                    }
                                }
                            },
                            fontSizeable: {
                                get: () => config.font_size || defaultConfig.font_size,
                                set: (value) => {
                                    config.font_size = value;
                                    if (window.elementSdk) {
                                        window.elementSdk.setConfig({ font_size: value });
                                    }
                                }
                            }
                        }),
                        mapToEditPanelValues: (config) => new Map([
                            ["unit_title", config.unit_title || defaultConfig.unit_title],
                            ["home_button_text", config.home_button_text || defaultConfig.home_button_text]
                        ])
                    });
                } catch (error) {
                    console.error("Error initializing Element SDK:", error);
                }
            }
        }
        
        // Initialize Element SDK
        initElementSdk();

        // Initialize app when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });
        
        // Fallback initialization if DOMContentLoaded already fired
        if (document.readyState === 'loading') {
            // DOM is still loading
        } else {
            // DOM is already loaded
            initializeApp();
        }
        
        // Auto-pronounce first word when page loads and mark first card as viewed
        setTimeout(() => {
            try {
                if (appState.currentSection === 'vocabulary' && appState.vocabSubSection === 'flashcards') {
                    // ƒê√°nh d·∫•u th·∫ª ƒë·∫ßu ti√™n ƒë√£ xem
                    appState.completedVocabCards.add('0');
                    updateProgress();
                    
                    const firstWord = vocabularyData[0]?.word;
                    if (firstWord) {
                        speakWord(firstWord);
                    }
                }
            } catch (error) {
                console.log('Initial pronunciation error:', error);
            }
        }, 2000);
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'997c1ba482f18936',t:'MTc2MjAwNzYxNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>